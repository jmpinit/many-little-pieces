<!doctype html>
<html>
	<head>
		<title>many-little-pieces</title>
		
		<script type="text/javascript" charset="utf-8" src="../Maple/lib/bison.js"></script>
        <script type="text/javascript" charset="utf-8" src="../Maple/lib/Class.js"></script>
        <script type="text/javascript" charset="utf-8" src="../Maple/lib/Twist.js"></script>
        <script type="text/javascript" charset="utf-8" src="../Maple/Maple.js"></script>
        <script type="text/javascript" charset="utf-8" src="../Maple/Client.js"></script>
        <script type="text/javascript" src="canvastext.js"></script>
        
	</head>
	<body bgcolor="black">
		<font face="Courier New" color="#00CC00" size=2><p id="field"></p></font>
        <canvas align="center" id="mainCanvas" width="512" height="512"></canvas>
		<script src="piececlient.js"></script>
        <script type="text/javascript">
			var canvas = document.getElementById('mainCanvas');
			var ctx = canvas.getContext('2d');
			CanvasTextFunctions.enable(ctx);
			
			ctx.clearRect(0,0,canvas.width,canvas.height);
			ctx.fillStyle = "rgba(0,0,0,0.66)";
			ctx.fillRect(0,0,canvas.width,canvas.height);
			
			//var y = ctx.fontAscent("sans",16);
			window.piecesConsole = new Object();
			var pC = window.piecesConsole;
			pC.font = 'sans'
			pC.size = 8
			ctx.strokeStyle = "rgba(255,255,255,0.75)";
			window.piecesConsole.chars = "`1234567890-=qwertyuiop[]\asdfghjkl;'zxcvbnm,.~!@#$%^&*()_+QWERTYUIOP{}|ASDFGHJKL:\"ZXCVBNM<>?";
			window.piecesConsole.canvases = {}
			for(var i=0;i<window.piecesConsole.chars.length;i++){
				ch = window.piecesConsole.chars.charAt(i);
				ca = window.piecesConsole.canvases;
				ca[ch] =  document.createElement('canvas');
				ctx = ca[ch].getContext('2d');
				CanvasTextFunctions.enable(ctx);
				width = ctx.measureText(pC.font,pC.size,ch);
				height = ctx.fontAscent(pC.font,pC.size);
				if(width > height){
					ca[ch].width = ca[ch].height = width;
				}else{
					ca[ch].width = ca[ch].height = height;
				}
				ctx.drawTextCenter(pC.font,pC.size,(ca[ch].width)/2,ca[ch].height,ch);
			}
				
			//ctx.drawText("sans",16,canvas.width/2,y,"Canvas Text Functions");
			/*
			
			window.piecesConsole.maxX = 64;//number of characters wide
			window.piecesConsole.maxY = 64;//number of characters tall
			window.piecesConsole.charSize = 8;
			
			window.piecesConsole.clear = function(){
				ctx.clearRect(0,0,canvas.width,canvas.height);
			}
			window.piecesConsole.setchar = function(x,y,char){
				cS = window.piecesConsole.charSize;
				ctx.clearRect((x-1)*cS,(y-1)*cS,x*cS,y*cS);
				ctx.drawTextCenter("sans",cS,(x-0.5)*cS,y*cS,char);
			}
			//window.piecesConsole.setAll = function(char) {
			*/
		</script>
	</body>
</html>
